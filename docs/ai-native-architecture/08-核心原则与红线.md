# 08 - æ ¸å¿ƒåŸåˆ™ä¸æ¶æ„çº¢çº¿

> **æ‰€å±æ–‡æ¡£**: AI åŸç”Ÿæ¶æ„å‡çº§è§„åˆ’  
> **ç« èŠ‚**: å + çº¢çº¿

---

## åã€æ ¸å¿ƒåŸåˆ™

### 10.1 äº¤äº’åŸåˆ™

1. **äººåªè¯´è¯ï¼ŒAI è°ƒåº¦** - ç”¨æˆ·è¡¨è¾¾éœ€æ±‚ï¼ŒAI è´Ÿè´£æ‰§è¡Œ
2. **ä¸€ä¸ªå…¥å£è§£å†³æ‰€æœ‰é—®é¢˜** - ç»Ÿä¸€å¯¹è¯å…¥å£ï¼Œæ— éœ€å¯»æ‰¾åŠŸèƒ½
3. **ä¸Šä¸‹æ–‡æ„ŸçŸ¥** - AI çŸ¥é“ç”¨æˆ·åœ¨å“ªã€åœ¨åšä»€ä¹ˆ
4. **è‡ªç„¶è¯­è¨€ä¼˜å…ˆ** - åƒä¸ä¸“å®¶å¯¹è¯ä¸€æ ·äº¤æµ

### 10.2 æŠ€æœ¯åŸåˆ™

1. **çœŸå®äº¤äº’** - æ¯ä¸€æ­¥éƒ½æ˜¯çœŸå®å‘ç”Ÿçš„ï¼Œç¦æ­¢å‡è¿›åº¦
2. **å®æ—¶åé¦ˆ** - å·¥å…·æ‰§è¡Œè¿‡ç¨‹å®æ—¶å¯è§
3. **å¯ä¸­æ–­** - ç”¨æˆ·å¯éšæ—¶åœæ­¢æ‰§è¡Œ
4. **é€æ˜æ‰§è¡Œ** - ç”¨æˆ·çŸ¥é“ AI åœ¨è°ƒç”¨ä»€ä¹ˆå·¥å…·

### 10.3 è®¾è®¡åŸåˆ™

1. **å·¥å…·åŒ–** - èƒ½åŠ›æŠ½è±¡ä¸ºå¯å¤ç”¨çš„å·¥å…·
2. **å·¥ä½œæµåŒ–** - å¤æ‚ä»»åŠ¡ç¼–æ’ä¸ºå·¥ä½œæµ
3. **æ¸è¿›å¢å¼º** - åœ¨ç°æœ‰ç³»ç»ŸåŸºç¡€ä¸Šé€æ­¥å‡çº§
4. **ä½“éªŒä¸€è‡´** - æ— è®ºåœ¨å“ªä¸ªé¡µé¢ï¼ŒAI åŠ©æ‰‹ä½“éªŒä¸€è‡´

### 10.4 IDE åŒ–åŸåˆ™

1. **å·¥ä½œåŒºæ€ç»´** - ä»¥å·¥ä½œåŒºè€Œéé¡µé¢ç»„ç»‡ç•Œé¢
2. **å‘½ä»¤ä¼˜å…ˆ** - æ‰€æœ‰æ“ä½œå¯é€šè¿‡å‘½ä»¤æ‰§è¡Œ
3. **å¿«æ·é”®å‹å¥½** - å¸¸ç”¨æ“ä½œéƒ½æœ‰å¿«æ·é”®
4. **å¯ç¼–ç¨‹æ€§** - ç•Œé¢æ“ä½œå¯è¢«ç¨‹åºåŒ–è°ƒç”¨

### 10.5 äººæœºåŒè½¨åŸåˆ™

1. **æ“ä½œç­‰ä»·** - AI èƒ½åšçš„ï¼Œäººä¹Ÿèƒ½æ‰‹åŠ¨åš
2. **ç»“æœä¸€è‡´** - æ— è®ºè°è§¦å‘ï¼Œæ•ˆæœå®Œå…¨ç›¸åŒ
3. **å¯å®¡è®¡** - èƒ½çœ‹åˆ° AI åšäº†ä»€ä¹ˆæ“ä½œ
4. **å¯æ¥ç®¡** - äººå¯éšæ—¶æ¥ç®¡ï¼Œç»§ç»­æ‰‹åŠ¨æ“ä½œ
5. **å¯å›é€€** - AI çš„æ“ä½œå¯ä»¥è¢«æ’¤é”€æˆ–ä¿®æ”¹

### 10.6 å¯¹è¯æµ + ç”»å¸ƒåŸåˆ™

1. **å¯¹è¯æ˜¯æŒ‡æŒ¥ï¼Œç”»å¸ƒæ˜¯æ‰§è¡Œ** - å¯¹è¯æµè´Ÿè´£æ²Ÿé€šï¼Œç”»å¸ƒè´Ÿè´£æ“ä½œ
2. **ç”»å¸ƒå†…å®¹å¯è¢«åŒæ–¹æ“ä½œ** - äººå¯ä»¥ç›´æ¥åœ¨ç”»å¸ƒä¸­æ“ä½œï¼ŒAI ä¹Ÿå¯ä»¥
3. **AI æ“ä½œæœ‰è§†è§‰åé¦ˆ** - AI åœ¨ç”»å¸ƒä¸­æ“ä½œæ—¶ï¼Œæœ‰æ˜ç¡®çš„è§†è§‰æŒ‡ç¤º
4. **ç”»å¸ƒå˜åŒ– AI å¯æ„ŸçŸ¥** - äººåœ¨ç”»å¸ƒä¸­çš„ä»»ä½•ä¿®æ”¹ï¼ŒAI éƒ½èƒ½å®æ—¶æ„ŸçŸ¥
5. **ç”»å¸ƒæ˜¯æ ‡å‡†ç»„ä»¶** - ç”»å¸ƒä¸­çš„è¡¨å•ã€åˆ—è¡¨ä¸ç³»ç»Ÿå…¶ä»–åœ°æ–¹å®Œå…¨ä¸€è‡´

### 10.7 AI é¢„åˆ¤åŸåˆ™

1. **ä¸»åŠ¨é¢„æµ‹ä¸‹ä¸€æ­¥** - AI æ ¹æ®å½“å‰ä¸Šä¸‹æ–‡ï¼Œé¢„åˆ¤ç”¨æˆ·æ¥ä¸‹æ¥å¯èƒ½çš„æ“ä½œ
2. **æä¾›å¤‡é€‰æŒ‡ä»¤** - æ¯æ¬¡å¯¹è¯åï¼Œæ˜¾ç¤º 3-5 ä¸ªæœ€å¯èƒ½çš„åç»­æŒ‡ä»¤
3. **ä¸€é”®è§¦å‘** - ç”¨æˆ·ç‚¹å‡»å¤‡é€‰æŒ‡ä»¤å³å¯ç›´æ¥æ‰§è¡Œï¼Œæ— éœ€æ‰“å­—
4. **åŠ¨æ€æ›´æ–°** - å¤‡é€‰æŒ‡ä»¤éšä¸Šä¸‹æ–‡å®æ—¶å˜åŒ–
5. **å­¦ä¹ ä¼˜åŒ–** - æ ¹æ®ç”¨æˆ·é€‰æ‹©ä¹ æƒ¯ï¼Œä¼˜åŒ–é¢„åˆ¤å‡†ç¡®ç‡

### 10.8 èƒ½åŠ›å¯è§æ€§åŸåˆ™

1. **èƒ½åŠ›å¯è§** - ç”¨æˆ·è¿›å…¥ä»»ä½•æ¨¡å—ï¼Œéƒ½èƒ½çœ‹åˆ° AI åœ¨æ­¤èƒ½åšä»€ä¹ˆ
2. **åˆ†ç±»æ¸…æ™°** - å·¥å…·å’Œå·¥ä½œæµåˆ†å¼€å±•ç¤ºï¼Œä¾¿äºç†è§£å’Œé€‰æ‹©
3. **ä¸Šä¸‹æ–‡ç›¸å…³** - æ ¹æ®å½“å‰é¡µé¢/é€‰ä¸­å†…å®¹åŠ¨æ€æ˜¾ç¤ºç›¸å…³å·¥å…·
4. **å¯æ¢ç´¢** - æ”¯æŒæ‚¬åœæŸ¥çœ‹è¯¦æƒ…ã€æœç´¢å·¥å…·ã€è¯¢é—® AI
5. **ä¸æ‰“æ‰°** - å·¥å…·æ å¯æ”¶èµ·ï¼Œä¸å½±å“æ—¥å¸¸æ“ä½œ

---

## ğŸ”´ æ¶æ„çº¢çº¿ï¼ˆä¸å¯è¿åï¼‰

> ä»¥ä¸‹ä¸¤æ¡æ˜¯"é˜²æ­¢æ¶æ„é€€åŒ–"çš„ä¿é™©ä¸ï¼Œå¿…é¡»åœ¨ä»£ç å±‚é¢å¼ºåˆ¶æ‰§è¡Œã€‚

### çº¢çº¿ 1ï¼šInteraction Orchestrator æ‹¥æœ‰ UI æœ€ç»ˆè£å†³æƒ

```
AIï¼ˆä»»ä½•è§’è‰²ï¼‰æ°¸è¿œä¸èƒ½ç›´æ¥å†³å®š UI çš„å‘ˆç°æ–¹å¼ï¼Œåªèƒ½æå‡ºè¯·æ±‚ã€‚
```

| è§’è‰² | èƒ½åš | ä¸èƒ½åš |
|------|------|--------|
| Role | æå‡º `uiSuggestion` | ç›´æ¥è°ƒç”¨ `render()` |
| Orchestrator | å†³å®šæ˜¯å¦å‘ˆç°ã€å¦‚ä½•å‘ˆç° | - |

**è¿ååæœ**ï¼šæ¶æ„é€€åŒ–ä¸º"AI æ§åˆ¶ UI"ï¼Œå¤±å»å¯æ§æ€§ã€‚

### çº¢çº¿ 2ï¼šé¢„åˆ¤æŒ‡ä»¤é»˜è®¤éœ€äººç¡®è®¤

```
ä»»ä½• Predicted Actionï¼Œé»˜è®¤å¿…é¡»æ˜¯"éœ€äººç¡®è®¤"çš„ã€‚
ç»å¯¹ç¦æ­¢ï¼šAI çœ‹ä½ å¯èƒ½è¦åš â†’ å°±å¸®ä½ åšäº†ã€‚
```

| ç±»å‹ | ç‚¹å‡»å | ç»å¯¹ç¦æ­¢ |
|------|--------|---------|
| execute | æ˜¾ç¤ºç¡®è®¤ â†’ ç­‰å¾…ç¡®è®¤ â†’ æ‰§è¡Œ | ç‚¹å‡»ç›´æ¥æ‰§è¡Œ |
| template | å¡«å…¥è¾“å…¥æ¡† â†’ ç­‰å¾…è¡¥å…… | è‡ªåŠ¨è¡¥å……å¹¶æ‰§è¡Œ |
| question | å¯ç›´æ¥å‘é€ï¼ˆä½é£é™©ï¼‰ | - |

**è¿ååæœ**ï¼šå˜æˆ"AI è‡ªä½œä¸»å¼ "ï¼Œé‡å›ç”¨æˆ·æœ€åæ„Ÿçš„ä½“éªŒã€‚

---

## çº¢çº¿çš„ä»£ç é˜²æŠ¤

### Interaction Orchestrator é˜²æŠ¤

```typescript
class InteractionOrchestrator {
  requestUI(request: UIRequest): UIDecision {
    // 1. æ ¡éªŒè¯·æ±‚åˆæ³•æ€§
    if (!this.uiRegistry.has(request.componentId)) {
      return { action: 'reject', reason: 'component_not_found' };
    }
    
    // 2. æ ¡éªŒ props
    const validation = this.validateProps(request.componentId, request.props);
    if (!validation.valid) {
      return { action: 'reject', reason: 'invalid_props', errors: validation.errors };
    }
    
    // 3. åˆ¤æ–­æ˜¯å¦å…è®¸å‘ˆç°
    if (this.shouldDefer(request)) {
      return { action: 'defer', reason: 'user_busy' };
    }
    
    // 4. å†³å®šå‘ˆç°æ–¹å¼
    return {
      action: 'render',
      target: this.decideTarget(request),
      timing: this.decideTiming(request)
    };
  }
  
  // âŒ ç¦æ­¢ï¼šRole ç›´æ¥è°ƒç”¨ render
  // âœ… å¿…é¡»ï¼šé€šè¿‡ requestUI èµ° Orchestrator
}
```

### é¢„åˆ¤æŒ‡ä»¤é˜²æŠ¤

```typescript
// é¢„åˆ¤æŒ‡ä»¤æ¥å£
interface PredictedAction {
  id: string;
  type: 'execute' | 'template' | 'question';
  label: string;
  icon: string;
  prompt?: string;
  tool?: string;
  params?: Record<string, any>;
  confidence: number;
  
  // ğŸ”´ å¼ºåˆ¶çº¦æŸ
  requiresConfirmation: true;  // execute ç±»å‹å¿…é¡»ä¸º true
}

// ç‚¹å‡»æ‰§è¡Œç±»æŒ‡ä»¤æ—¶
function handleExecuteClick(action: PredictedAction) {
  // âŒ ç¦æ­¢ç›´æ¥æ‰§è¡Œ
  // await executeTool(action.tool, action.params);
  
  // âœ… å¿…é¡»æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
  showConfirmationDialog({
    title: 'ç¡®è®¤æ‰§è¡Œ',
    action: action.label,
    params: action.params,
    onConfirm: () => executeTool(action.tool, action.params),
    onCancel: () => {},
    onModify: () => showParamsEditor(action)
  });
}
```

---

## çº¢çº¿è‡ªæ£€æ¸…å•

åœ¨æ¯æ¬¡ä»£ç æäº¤å‰ï¼Œç¡®è®¤ä»¥ä¸‹æ£€æŸ¥é¡¹ï¼š

| æ£€æŸ¥é¡¹ | é€šè¿‡ |
|--------|-----|
| UI æ¸²æŸ“æ˜¯å¦éƒ½é€šè¿‡ Orchestrator | â˜ |
| æ˜¯å¦æœ‰ Role ç›´æ¥è°ƒç”¨ render | â˜ |
| é¢„åˆ¤æŒ‡ä»¤ç‚¹å‡»æ˜¯å¦æ˜¾ç¤ºç¡®è®¤ | â˜ |
| æ˜¯å¦æœ‰è‡ªåŠ¨æ‰§è¡Œçš„é¢„åˆ¤é€»è¾‘ | â˜ |
| Command å±‚æ˜¯å¦äººæœºå…±ç”¨ | â˜ |
| æ“ä½œæ—¥å¿—æ˜¯å¦ç»Ÿä¸€è®°å½• | â˜ |

---

## ä¸‹ä¸€æ­¥

- [09-æ¶æ„å®¡è®¡ä¸æ”¹è¿›æ–¹æ¡ˆ](./09-æ¶æ„å®¡è®¡ä¸æ”¹è¿›æ–¹æ¡ˆ.md) - äº†è§£æ¶æ„å®¡è®¡è¯¦æƒ…
- [10-UIUXè¿›åŒ–è®¾è®¡è§„èŒƒ](./10-UIUXè¿›åŒ–è®¾è®¡è§„èŒƒ.md) - äº†è§£ UI/UX è¿›åŒ–è®¾è®¡

