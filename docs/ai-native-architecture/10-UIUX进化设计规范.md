# 10 - UI/UX 进化设计规范

> **所属文档**: AI 原生架构升级规划  
> **章节**: 十二
> **审计角色**: 世界顶级 UI/UX 设计大师  
> **审计视角**: 生产力工具交互范式的根本性重塑  
> **核心洞察**: dhs-atlas 不仅是后台管理系统，而是对"人机共创"交互范式的重新定义

---

## 12.1 认知张力平衡：Canvas vs Panel

### 12.1.1 非对称布局设计——"呼吸式"侧边栏

**设计原则**：用户注意力的分配是双区设计的最大挑战。

```
状态 A：AI 非活跃（仅感知）
┌─────────────────────────────────────────────────────────┬───┐
│                                                         │ ▌ │
│                                                         │ A │
│                    Canvas（主画布）                      │ I │
│                       95% 空间                          │   │
│                       专注模式                          │ ▌ │
│                                                         │   │
└─────────────────────────────────────────────────────────┴───┘
                                              极简状态条 (5%)

状态 B：AI 活跃（对话中）
┌───────────────────────────────────────┬─────────────────────┐
│                                       │                     │
│           Canvas（主画布）             │    AI Panel        │
│                                       │                     │
│         ┌─────────────────────┐       │   对话流 + 工具    │
│         │                     │       │                     │
│         │   深度偏移效果       │       │   [活跃状态]        │
│         │   (scale: 0.98)     │       │                     │
│         │   (blur: 1px)       │       │                     │
│         └─────────────────────┘       │                     │
│                                       │                     │
└───────────────────────────────────────┴─────────────────────┘
              焦点暗示：Canvas 轻微退后
```

**实现规范**：
- 收缩状态：48px 极简状态条
- 展开状态：420px 对话面板
- 过渡动画：300ms cubic-bezier(0.4, 0, 0.2, 1)
- 深度偏移：scale(0.98) + blur(1px) + opacity(0.95)

### 12.1.2 投射动画（Projection Dynamics）

**设计原则**：当 AI 将 UI 组件"投射"到画布时，建立视觉上的因果关系。

**动画时序**：
- T0 (0ms)：AI 消息气泡出现
- T1 (150ms)：光点从气泡溢出
- T2 (300ms)：贝塞尔曲线路径展开
- T3 (450ms)：组件完全就位

---

## 12.2 交互原语的语义化视觉

### 12.2.1 意图光标（Intent Cursor）

**设计原则**：当 AI 操作 Canvas 时，使用区别于系统鼠标的"意图光标"。

```
系统鼠标 vs AI 意图光标

      ↖              ◉ ~~~
    系统光标        流态光标 + 拖尾
   (用户操作)        (AI 操作)

意图光标状态：
• 悬停：静态脉冲
• 移动中：流动拖尾
• 操作中：旋转动画
```

**实现规范**：
- 尺寸：24px
- 颜色：var(--ai-intent-color)
- 光晕半径：8px
- 拖尾长度：5
- 脉冲频率：2s

### 12.2.2 确定性色彩心理学

**AI 决策级别色彩体系**：

| 级别 | 颜色 | OKLCH 值 | 含义 |
|------|------|---------|------|
| **L1 - 自动** | 青绿色 | oklch(0.75 0.12 180) | 安全、流畅、已完成 |
| **L2 - 告知** | 天蓝色 | oklch(0.70 0.15 220) | 知晓、进行中、可信任 |
| **L3 - 确认** | 靛青紫 | oklch(0.65 0.20 280) | 请求连接、等待确认 ⭐ |
| **L4 - 逐步** | 品红紫 | oklch(0.60 0.18 320) | 重要、审慎、需逐步确认 |
| **意图光标** | 亮紫蓝 | oklch(0.72 0.18 260) | AI 当前焦点、正在操作 |

---

## 12.3 极致命令面板体验

### 12.3.1 模糊上下文搜索（Fuzzy Contextual Search）

**设计原则**：命令面板应具备感知当前 Canvas 内容的能力。

**搜索权重算法**：
- 当前域命令：权重 × 3.0
- 当前实体相关：权重 × 2.0
- 最近使用：权重 × 1.5
- 模糊匹配：基础权重 × 匹配度

### 12.3.2 操作回放时间线

**设计原则**：利用 Event Log，提供"撤销/重演"的时间线视图。

功能特性：
- 时间线滑块拖拽
- Canvas 实时预览
- 事件列表展示
- 一键恢复到指定状态

---

## 12.4 真实交互的极致视觉设计

### 12.4.1 断点式加载（Breakpoint Loading）

**设计原则**：不使用循环转圈的 Spinner，采用"数据驱动渲染"。

```
状态 1：等待数据（毛玻璃草稿状态）
┌─────────────────────────────────────────────────────┐
│ ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ │
│ ░░░░░░░░░░░░░░ 毛玻璃占位 ░░░░░░░░░░░░░░░░░░░░░░░░░ │
│ ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ │
└─────────────────────────────────────────────────────┘

状态 2：部分数据到达（渐进清晰化）
┌─────────────────────────────────────────────────────┐
│ 客户名称: XX 设计公司              ← 已清晰          │
│ 联系人: ░░░░░░░░░░                 ← 等待中          │
│ 电话:   ░░░░░░░░░░                 ← 等待中          │
└─────────────────────────────────────────────────────┘

状态 3：完全加载（全部清晰）
┌─────────────────────────────────────────────────────┐
│ 客户名称: XX 设计公司                                │
│ 联系人: 张三                                         │
│ 电话:   138xxxx1234                                  │
└─────────────────────────────────────────────────────┘
```

### 12.4.2 渐进式曝光日志（Progressive Disclosure Console）

**设计原则**：AiConsole 中的日志流应采用渐进式曝光版式。

**视觉状态映射**：
- ✅ 完成：清晰 + 收起详情
- ◉ 进行中：高亮边框 + 展开详情 + 实时更新
- ○ 等待中：毛玻璃 + 折叠

---

## 12.5 多租户环境感知

### 12.5.1 品牌变量切片

**设计原则**：为每个租户生成基于其 Slug 或 Logo 的主色调微调方案。

**核心原则**：
- 不改变组件形态（严格遵守 shadcn/ui）
- 只在边缘细节体现租户身份
- 提供潜意识环境锚点，防止误操作

**应用位置**：
- 左侧 2px 边缘条
- 滚动条轨道着色
- 命令面板聚焦边框
- 状态栏租户标识

---

## 12.6 预判指令防误触美学

### 12.6.1 二段式确认交互

**方案 A：长按确认（推荐 L3 级别）**
- 需长按 1.5 秒，进度条填满后执行
- 松手即取消，进度重置
- 提供触觉反馈（移动端）

**方案 B：滑动确认（推荐 L4 级别）**
- 需滑动超过 80% 才触发确认
- 松手自动回弹（未达阈值）
- 提供阻尼感反馈

**方案 C：双击确认（轻量级 L3）**
- 第一次点击后按钮变为"再次点击确认"
- 3 秒内未二次点击，自动重置
- 视觉上有倒计时指示

---

## 12.7 UI/UX 落地验证清单

### 12.7.1 极简 Canvas 骨架验证（第一步）

**目标**：验证"感知-反馈环"的动画曲线和响应延迟

**验收标准**：

| 指标 | 目标值 | 验收方法 |
|------|--------|---------|
| 输入响应延迟 | < 50ms | 性能监控 |
| AI 首字符延迟 | < 500ms | 埋点统计 |
| 投射动画帧率 | > 60fps | Chrome DevTools |
| 投射动画总时长 | 450ms ± 50ms | 动画计时 |
| 表单输入响应 | < 16ms | 帧率监控 |
| AI 感知延迟 | < 300ms | 事件时间戳差值 |

### 12.7.2 交互原语视觉验证清单

| 原语 | 验证点 | 状态 |
|------|--------|------|
| **AiForm** | 毛玻璃占位、字段清晰化动画、意图光标 | ☐ |
| **AiPicker** | 选项悬停、AI 自动选择动画 | ☐ |
| **AiList** | 渐进加载、选中状态、AI 筛选动画 | ☐ |
| **AiDetails** | 数据驱动渲染、区块清晰化 | ☐ |
| **AiModalConfirm** | 二段式确认、L3/L4 区分 | ☐ |
| **AiReviewPanel** | 对比视图、逐条确认、批量操作 | ☐ |
| **AiStepper** | 状态机进度、真实状态映射 | ☐ |
| **AiConsole** | 渐进式曝光、实时日志流 | ☐ |

---

## 12.8 设计系统扩展点

| 扩展点 | 说明 | 优先级 |
|--------|------|--------|
| **暗色模式** | 所有色彩变量需支持 dark mode 变体 | P1 |
| **动效库** | 统一的 Framer Motion 配置预设 | P1 |
| **响应式断点** | 平板/移动端的 Panel 行为调整 | P2 |
| **可访问性** | ARIA 标签、键盘导航、屏幕阅读器 | P2 |
| **国际化** | RTL 布局支持 | P3 |

---

## 下一步

- [附录](./附录.md) - 术语定义与参考设计
- [README](./README.md) - 返回文档索引

